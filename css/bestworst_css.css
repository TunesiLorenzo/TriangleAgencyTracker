/* ensure char boxes can contain absolute overlays */
<style>

/* star/thumb visuals retained from before; we add shine */
.thumb {
  position: absolute;
  right: 6px;
  top: 6px;
  font-size: 18px;
  pointer-events: none;
  user-select: none;
}

/* Ensure char is the clipping & positioning container */
.char {
  position: relative;    /* already required */
  overflow: hidden;      /* <-- clip shine and broken overlays to the char box */
  /* keep display / sizing as you already have it */
}

/* Shrink the shine overlay so it only sweeps across the char area */
.shine-overlay {
  position: absolute;
  /* replace the giant size with a thin, narrow strip centered vertically */
  left: -120%;           /* start well off-left so transform covers entire sweep */
  top: 0%;              /* adjust vertical placement within the char */
  width: 340%;           /* wide enough to sweep corner-to-corner, but limited */
  height: 100%;           /* cover most of the char's height but not overflow */
  pointer-events: none;
  mix-blend-mode: screen;
  opacity: 0;            /* animation controls visibility */
  transform: skewX(-18deg) translateX(-100%);
  background: linear-gradient(
    90deg,
    rgba(255,255,255,0.00) 0%,
    rgba(255,255,255,0.65) 45%,
    rgba(255,255,255,0.10) 55%,
    rgba(255,255,255,0.00) 100%
  );
  animation: shine-sweep 2.5s linear infinite;
}

/* only show the shine overlay when the char is the top merit */
.char:not(.top-merit) .shine-overlay { display: none; }

/* Tighter keyframes so the strip sweeps across the char box */
@keyframes shine-sweep {
  0%   { transform: skewX(-18deg) translateX(-100%); opacity: 0; }
  10%  { opacity: 0.9; }
  50%  { transform: skewX(-18deg) translateX(0%); opacity: 0.6; }
  90%  { opacity: 0; }
  100% { transform: skewX(-18deg) translateX(100%); opacity: 0; }
}




/* Ensure char is the clipping & positioning container */
.char {
  position: relative;
  overflow: hidden;   /* clip overlays to the char box */
}

/* DARK VIGNETTE overlay that normally darkens the char box */
.vignette-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 30;
  mix-blend-mode: multiply; /* darken content underneath */
  /* radial gradient: subtle center visibility, strong dark edges */
  background: radial-gradient(
    circle at 50% 40%,
    rgba(0,0,0,0.20) 0%,
    rgba(0,0,0,0.45) 30%,
    rgba(0,0,0,0.75) 65%,
    rgba(0,0,0,0.95) 100%
  );
  /* base opacity (how strongly it darkens) â€” high value = darker */
  opacity: 0.88;
  filter: blur(6px) saturate(0.9);
  transform-origin: center;
  will-change: opacity, transform;
  /* two animations:
     - flicker (short irregular dips in opacity -> momentary illumination)
     - breathe (slow subtle movement so it doesn't feel static)
  */
  animation:
    vignette-flicker-dark 1.15s steps(6, end) infinite,
    vignette-breathe 3.8s ease-in-out infinite;
}

/* Only show the vignette on the top-demerit char */
.char:not(.top-demerit) .vignette-overlay { display: none; }

/* Flicker: stays mostly opaque, with short drops to reveal the char */
@keyframes vignette-flicker-dark {
  0%   { opacity: 0.90; transform: scale(1); }
  6%   { opacity: 0.88; }
  10%  { opacity: 0.32; transform: scale(1.005); } /* quick bright flash */
  18%  { opacity: 0.86; transform: scale(0.997); }
  30%  { opacity: 0.30; transform: scale(1.01); }  /* another flash */
  45%  { opacity: 0.92; transform: scale(1); }
  62%  { opacity: 0.80; transform: scale(0.998); }
  75%  { opacity: 0.28; transform: scale(1.02); }  /* big illumination */
  88%  { opacity: 0.88; transform: scale(0.995); }
  100% { opacity: 0.90; transform: scale(1); }
}

/* Slow breathing to add weight */
@keyframes vignette-breathe {
  0%   { filter: blur(5px) saturate(0.9); transform: scale(1); }
  50%  { filter: blur(8px) saturate(0.95); transform: scale(1.01); }
  100% { filter: blur(5px) saturate(0.9); transform: scale(1); }
}

/* Maintain tilt but keep overlay positioned correctly */
.char.top-demerit.crooked {
  transform-origin: 50% 50%;
  transition: transform 0.25s ease;
  transform: rotate(-3.5deg) translateY(2px);
}

/* quick mobile fallback: reduce intensity and animation load */
@media (max-width: 600px) {
  .vignette-overlay {
    opacity: 0.82;
    animation-duration: 1.6s, 4.4s;
    filter: blur(4px) saturate(0.85);
  }
}


</style>